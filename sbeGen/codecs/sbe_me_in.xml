<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sbe:messageSchema xmlns:sbe="http://fixprotocol.io/2016/sbe"
		   xmlns:xi="http://www.w3.org/2001/XInclude"
                   package="digital.exchange.sbe.me.input"
                   id="101"
                   version="1"
                   semanticVersion="1"
                   description="Message Codecs for communication REST SERVER - ME">
                   
    <xi:include href="common_types.xml"/>
    <xi:include href="common_types_exchange.xml"/>
    
    <types>
        <enum name="ResponseEnum" encodingType="int32">
            <validValue name="OK">0</validValue>
            <validValue name="NOT_OK">1</validValue>
            <validValue name="ORDER_INVALID">3</validValue>
            <validValue name="ORDER_FULLY_FILLED">4</validValue>
            <validValue name="ORDER_ADDED_TO_ORDERBOOK">5</validValue>
            <validValue name="ORDER_REJECTED">6</validValue>
            <validValue name="ORDERBOOK_EMPTY">7</validValue>
            <validValue name="ORDER_EXISTS">8</validValue>
            <validValue name="ORDER_NOT_EXIST">9</validValue>
            <validValue name="ORDER_CANCELED">10</validValue>
            <validValue name="MATCHING_ENGINE_NOT_EXIST">11</validValue>
            <validValue name="MATCHING_ENGINE_EXISTS">12</validValue>
            <validValue name="ACCOUNT_EXISTS">13</validValue>
            <validValue name="ACCOUNT_NOT_EXIST">14</validValue>
            <validValue name="ACCOUNT_SYMBOL_EXISTS">15</validValue>
            <validValue name="ACCOUNT_SYMBOL_NOT_EXIST">16</validValue>
            <validValue name="ACCOUNT_SYMBOL_INSUFFICIENT_FUNDS">17</validValue>
        </enum>
        <!-- <type name="time" primitiveType="int64" description="Epoch time in milliseconds since 1 Jan 1970 UTC."/>
        <type name="price" primitiveType="int64" description="Price in whole cents."/>
        <type name="uuidString" primitiveType="char" length="36"
              description="36 char UUID held within an ASCII string."/> -->
    </types>
    
    <sbe:message name="EgressSubscribe"
                 id="1"
                 description="Subscribe to ME egress">
    </sbe:message>
    
    <sbe:message name="EgressUnsubscribe"
                 id="2"
                 description="Unsubscribe from ME egress">
    </sbe:message>
    
    <sbe:message name="AddPairMatchingEngineCommand"
                 id="3"
                 description="Add Pair to matching engine">
	<field name="seqNum" id="1" type="int64"/>
        <field name="base" id="2" type="SymbolString"/>
        <field name="quote" id="3" type="SymbolString"/>
    </sbe:message>
    
    <sbe:message name="RemovePairMatchingEngineCommand"
                 id="4"
                 description="Remove Pair from matching engine">
	<field name="seqNum" id="1" type="int64"/>
        <field name="base" id="2" type="SymbolString"/>
        <field name="quote" id="3" type="SymbolString"/>
    </sbe:message>

    <sbe:message name="AddOrderCommand"
                 id="5"
                 description="Add a new Order">
        <field name="seqNum" id="1" type="int64"/>
        <field name="base" id="2" type="SymbolString"/>
        <field name="quote" id="3" type="SymbolString"/>
        <field name="accountId" id="4" type="int64"/>
        <field name="price" id="5" type="int64"/>
        <field name="qty" id="6" type="int64"/>
        <field name="orderSide" id="7" type="SbeOrderSide"/>
        <field name="orderType" id="8" type="SbeOrderType"/>
    </sbe:message>

    <sbe:message name="CancelOrderCommand"
                 id="6"
                 description="Cancel a Order">
        <field name="seqNum" id="1" type="int64"/>
        <field name="base" id="2" type="SymbolString"/>
        <field name="quote" id="3" type="SymbolString"/>
        <field name="accountId" id="4" type="int64"/>
        <field name="orderId" id="5" type="int64"/>
    </sbe:message>
    
    <sbe:message name="AddAccountCommand"
                 id="7"
                 description="Add Account">
        <field name="seqNum" id="1" type="int64"/>
        <field name="accountId" id="2" type="int64"/>
    </sbe:message>
    
    <sbe:message name="RemoveAccountCommand"
                 id="8"
                 description="Remove Account">
	<field name="seqNum" id="1" type="int64"/>
        <field name="accountId" id="2" type="int64"/>
    </sbe:message>
    
    <sbe:message name="DepositCommand"
                 id="9"
                 description="Add Account">
        <field name="seqNum" id="1" type="int64"/>
        <field name="accountId" id="2" type="int64"/>
        <field name="symbol" id="3" type="SymbolString"/>
        <field name="qty" id="4" type="int64"/>
    </sbe:message>
    
    <sbe:message name="WithdrawCommand"
                 id="10"
                 description="Remove Account">
	<field name="seqNum" id="1" type="int64"/>
        <field name="accountId" id="2" type="int64"/>
        <field name="symbol" id="3" type="SymbolString"/>
        <field name="qty" id="4" type="int64"/>
    </sbe:message>
    
    <sbe:message name="CommandResponse"
                 id="11"
                 description="Result from adding a new Order">
        <field name="seqNum" id="1" type="int64"/>
        <field name="response" id="2" type="ResponseEnum"/>
    </sbe:message>

    <sbe:message name="CommandResponseOrder"
                 id="12"
                 description="Result from adding a new Order">
        <field name="seqNum" id="1" type="int64"/>
        <field name="response" id="2" type="ResponseEnum"/>
        <field name="order" id="3" type="order"/>
    </sbe:message>

</sbe:messageSchema>
